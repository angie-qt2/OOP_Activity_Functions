using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace ACT10
{
    internal class Program
    {
        class CartLine
        {
            public string itemCode;
            public int Qty;
            public decimal unitPrice;
            public string Cat;

        }

        static void Main()
        {
            var cart = new List<CartLine>();
            while (true)
            {
                Console.Write("Item Code (EXIT to stop): ");
                string code = Console.ReadLine();
                if (code.ToUpper() == "EXIT") break;

                Console.Write("Quantity: ");
                int qty = int.Parse(Console.ReadLine());
                Console.Write("Price: ");
                decimal price = decimal.Parse(Console.ReadLine());
                Console.Write("Category (GROCERY/ELECTRONICS/OTHER): ");
                string cat = Console.ReadLine().ToUpper();

                if (qty < 1 || price < 0 || (cat != "GROCERY" && cat != "ELECTRONICS" && cat != "OTHER"))
                { Console.WriteLine("Invalid!"); continue; }

                cart.Add(new CartLine { itemCode = code, Qty = qty, unitPrice = price, Cat = cat });
            }

            decimal subtotal = 0, groceryDisc = 0, electroTotal = 0;
            var codes = new HashSet<string>();

            foreach (var c in cart)
            {
                decimal lineTotal = c.Qty * c.unitPrice;
                subtotal += lineTotal;
                codes.Add(c.itemCode);
                if (c.Cat == "GROCERY" && c.Qty >= 10) groceryDisc += lineTotal * 0.05m;
                if (c.Cat == "ELECTRONICS") electroTotal += lineTotal;
            }

            decimal electroDisc = (electroTotal >= 20000) ? electroTotal * 0.08m : 0;
            decimal cartDisc = (codes.Count >= 5) ? 50 : 0;
            decimal total = subtotal - groceryDisc - electroDisc - cartDisc;

            Console.WriteLine($"Subtotal: ₱{subtotal:F2}");
            Console.WriteLine($"Grocery Disccount: ₱{groceryDisc:F2}");
            Console.WriteLine($"Electronics Discount: ₱{electroDisc:F2}");
            Console.WriteLine($"Cart Discount: ₱{cartDisc:F2}");
            Console.WriteLine($"Final Total: ₱{total:F2}");
        }
    }
}
